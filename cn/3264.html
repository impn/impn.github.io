<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="referrer" content="same-origin"><meta name="referrer" content="no-referrer"><meta name="description" content="范式建模和维度建模对比"><meta name="keywords" content="大数据,BigData,数据开发,Hadoop,Spark,Flink,Hive,HBase"><link rel="alternate" href="/cn/atom.xml" title="马攀的技术栈"><link rel="shortcut icon" type="image/x-icon" href="/cn/favicon.ico?v=2.11.0"><link rel="canonical" href="https://mapan.tech/cn/3264.html"><link rel="stylesheet" type="text/css" href="/cn/css/style.css?v=2.11.0"><script>window.config={toc:!0,fancybox:!1,pjax:!1,latex:!1}</script><title>范式建模和维度建模对比 - 马攀的技术栈</title></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/cn/." class="logo">马攀的技术栈</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/cn/"><li class="mobile-menu-item">首页</li></a><a href="/cn/categories.html"><li class="mobile-menu-item">分类</li></a><a href="/cn/about.html"><li class="mobile-menu-item">关于</li></a><a href="/cn/message.html"><li class="mobile-menu-item">留言</li></a><a href="/cn/links.html"><li class="mobile-menu-item">友链</li></a></ul></nav><div class="container" id="mobile-panel"><header id="header" class="header"><div class="logo-wrapper"><a href="https://mapan.tech" class="logo">马攀的技术栈</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/cn/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/categories.html">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/about.html">关于</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/message.html">留言</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/links.html">友链</a></li></ul></nav></header><main id="main" class="main"><div class="content-wrapper"><div id="content" class="content"><article class="post"><header class="post-header"><h1 class="post-title">范式建模和维度建模对比</h1><div class="post-meta"><span class="post-time">2019-10-05 </span><span class="post-category"><a href="/cn/categories/数据仓库/">数据仓库</a> </span><span id="/cn/3264.html" class="leancloud-visitors" data-flag-title="范式建模和维度建模对比">阅读数 <span class="leancloud-visitors-count">1000</span> </span><span class="post-count">字数统计 1k </span><span class="post-count">阅读时长 3</span></div></header><div class="post-toc" id="post-toc"><h2 class="post-toc-title">文章目录</h2><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#范式建模"><span class="toc-text">范式建模</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#优点："><span class="toc-text">优点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缺点："><span class="toc-text">缺点：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#维度建模"><span class="toc-text">维度建模</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#优点：-1"><span class="toc-text">优点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缺点：-1"><span class="toc-text">缺点：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#维度建模举例"><span class="toc-text">维度建模举例</span></a></li></ol></div></div><div class="post-content"><h1 id="范式建模"><a href="#范式建模" class="headerlink" title="范式建模"></a>范式建模</h1><p>该方法的主要由Inmon所提倡，主要利用关系型数据库进行数据仓库的建设，且模型的建设方法和业务系统的数据模型比较类似<br>经典范式理论中，一个符合第三范式的关系必须具有以下三个条件：</p><ul><li>1NF：每个属性值唯一，不具有多义性；</li><li>2NF：每个非主属性必须完全依赖于整个主键，而非主键的一部分；</li><li>3NF：每个非主属性不能依赖于其他关系中的属性。</li></ul><h2 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h2><ul><li>节约存储</li><li>结构清晰</li><li>易于理解</li><li>适合关系型数据库</li></ul><h2 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h2><ul><li>构建比较繁琐</li><li>查询复杂</li><li>不适合构建在大数据分布式环境下</li></ul><p>虽然有这些缺点，但是范式建模的理论，仍然是需要我们去熟练掌握。原因有如几点：</p><ul><li>数据仓库的上游有相当一部分数据源是业务数据库，而这些业务数据库，其理论一般基于范式理论；</li><li>数据源的规范定义需要我们了解范式理论；</li><li>数据仓库下游系统比如报表系统设计时，可能会用到范式理论。</li></ul><h1 id="维度建模"><a href="#维度建模" class="headerlink" title="维度建模"></a>维度建模</h1><p>范式由于存在上述的问题，Kimball根据自己的经验，提出的维度建模的理论，即数据都可以抽象成事实和维度，维度为观察事物的角度，事实为对应某粒度下的度量值，一般，维度建模的步骤如下：</p><ul><li>1.选择业务过程<br>业务过程是-系列操作活动，转换为事实表中的事实，例如每个月每个账单快照</li><li>2.声明粒度<br>粒度是指事实表中的一行代表什么。同一事实表不要混用粒度，最好从最小粒度开始设计维度，因其能承受用户无法预知的查询需求。</li><li>3.确认维度<br>维度是根据粒度将表分开成多个维度表，即从不同维度（角度）去看。<br>维度是数据仓库的灵魂，是BI的入口和驱动</li><li>4.确认事实<br>事实是指一种在某个粒度下的度量，例如在销售维度中，销量和总额是良好的事实，而商店经理的工资则不允许出现在该维度中。</li></ul><h2 id="优点：-1"><a href="#优点：-1" class="headerlink" title="优点："></a>优点：</h2><ul><li>方便使用</li><li>适合大数据下的数据处理</li><li>适合进行OL AP操作</li></ul><h2 id="缺点：-1"><a href="#缺点：-1" class="headerlink" title="缺点："></a>缺点：</h2><ul><li>维度补全造成的数据存储的浪费</li><li>维度变化造成的数据更新量大</li><li>与范式理论差异很大，是典型的反三范式</li></ul><h1 id="维度建模举例"><a href="#维度建模举例" class="headerlink" title="维度建模举例"></a>维度建模举例</h1><p>假设我们要构建的是一张订单表，那业务过程即为这个具体是哪种业务场景下的订单数据;</p><p>粒度即为该表中的每一 条数据具体是细化到如何的程度，是一条数据代表一个订单还是多个订单;</p><p>维度即为该订单有哪些的附属信息，比方说订单类型、支付方式、城市信心、日期信息等等;</p><p>事实是指具体的订单量的数值。</p><p>那么，我们可以假设，这个订单表的基础信息包括：</p><div class="table-container"><table><thead><tr><th style="text-align:left">编号</th><th style="text-align:left">字段</th></tr></thead><tbody><tr><td style="text-align:left">01</td><td style="text-align:left">订单ID</td></tr><tr><td style="text-align:left">02</td><td style="text-align:left">发货人ID</td></tr><tr><td style="text-align:left">03</td><td style="text-align:left">收件人ID</td></tr><tr><td style="text-align:left">04</td><td style="text-align:left">发货时间</td></tr><tr><td style="text-align:left">05</td><td style="text-align:left">发货地点</td></tr><tr><td style="text-align:left">06</td><td style="text-align:left">快递单号</td></tr><tr><td style="text-align:left">07</td><td style="text-align:left">物品件数</td></tr><tr><td style="text-align:left">08</td><td style="text-align:left">订单总金额</td></tr><tr><td style="text-align:left">09</td><td style="text-align:left">订单状态</td></tr><tr><td style="text-align:left">10</td><td style="text-align:left">下单时间</td></tr><tr><td style="text-align:left">11</td><td style="text-align:left">支付订单号</td></tr><tr><td style="text-align:left">12</td><td style="text-align:left">支付时间</td></tr><tr><td style="text-align:left">13</td><td style="text-align:left">支付状态</td></tr><tr><td style="text-align:left">14</td><td style="text-align:left">收货时间</td></tr><tr><td style="text-align:left">15</td><td style="text-align:left">收货状态</td></tr></tbody></table></div><p><strong>业务过程</strong>：用户购买商品的订单记录表<br><strong>申明粒度</strong>：每一条记录代表一个有效订单<br><strong>确认维度</strong>：商户维度、用户维度、支付维度、收货维度<br><strong>确认事实</strong>：订单总金额</p><p>通过对不同的维度进行统计组合，我们就会得到一个多维数据集，来从多角度观察我们的业务过程的好坏情况。</p><hr><p>参考：<a href="https://www.bilibili.com/video/BV1Z4411m7NV?p=6">https://www.bilibili.com/video/BV1Z4411m7NV?p=6</a></p></div><div class="post-copyright"><p class="copyright-item"><span>原文作者: </span><a href="https://mapan.tech/cn">MaPan</a></p><p class="copyright-item"><span>原文链接: </span><a href="https://mapan.tech/cn/3264.html">https://mapan.tech/cn/3264.html</a></p><p class="copyright-item"><span>许可协议: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a></p></div><footer class="post-footer"><nav class="post-nav"><a class="prev" href="/cn/b78f.html"><i class="iconfont icon-left"></i> <span class="prev-text nav-default">事实表基本概念</span> <span class="prev-text nav-mobile">上一篇</span> </a><a class="next" href="/cn/f544.html"><span class="next-text nav-default">什么是数据仓库</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer></article></div><div class="comments" id="comments"><div id="vcomments"></div></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="/cn/atom.xml" class="iconfont icon-rss" title="rss" target="_blank"></a></div><div class="copyright"><span class="division">&nbsp;</span><span class="post-count"> 全站字数 93.7k </span><span class="copyright-year">Since 2015 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">MaPan</span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div></div><script src="./lib/valine/av-min.js?v=3.0.4"></script><script src="./lib/valine/Valine.min.js"></script><script type="text/javascript">new Valine({el:"#vcomments",notify:!1,verify:!0,app_id:"XtxvAXPwOzM9noIc3eyxi3AS-gzGzoHsz",app_key:"yEVQszyxb4bwLuAGU5VHnPR8",placeholder:"说点什么吧...",avatar:"mm",visitor:"ture"})</script><script type="text/javascript" src="/cn/lib/jquery/jquery.min.js"></script><script type="text/javascript" src="/cn/lib/slideout/slideout.js"></script><script type="text/javascript" src="/cn/js/src/even.js?v=2.11.0"></script></body></html>