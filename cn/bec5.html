<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="referrer" content="same-origin"><meta name="referrer" content="no-referrer"><meta name="description" content="SQL相关"><meta name="keywords" content="大数据,BigData,数据开发,BI,数据分析,Hadoop,Spark,Flink,Hive,HBase"><link rel="alternate" href="/cn/atom.xml" title="马攀的技术栈"><link rel="shortcut icon" type="image/x-icon" href="/cn/favicon.ico?v=2.11.0"><link rel="canonical" href="https://mapan.tech/cn/bec5.html"><link rel="stylesheet" type="text/css" href="/cn/css/style.css?v=2.11.0"><script>window.config={toc:!0,fancybox:!1,pjax:!1,latex:!1}</script><title>SQL相关 - 马攀的技术栈</title></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/cn/." class="logo">马攀的技术栈</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/cn/"><li class="mobile-menu-item">首页</li></a><a href="/cn/categories.html"><li class="mobile-menu-item">分类</li></a><a href="/cn/about.html"><li class="mobile-menu-item">关于</li></a><a href="/cn/message.html"><li class="mobile-menu-item">留言</li></a><a href="/cn/links.html"><li class="mobile-menu-item">友链</li></a></ul></nav><div class="container" id="mobile-panel"><header id="header" class="header"><div class="logo-wrapper"><a href="https://mapan.tech" class="logo">马攀的技术栈</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/cn/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/categories.html">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/about.html">关于</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/message.html">留言</a></li><li class="menu-item"><a class="menu-item-link" href="/cn/links.html">友链</a></li></ul></nav></header><main id="main" class="main"><div class="content-wrapper"><div id="content" class="content"><article class="post"><header class="post-header"><h1 class="post-title">SQL相关</h1><div class="post-meta"><span class="post-time">2017-10-03 </span><span class="post-category"><a href="/cn/categories/数据库/">数据库</a> </span><span id="/cn/bec5.html" class="leancloud-visitors" data-flag-title="SQL相关">阅读数 <span class="leancloud-visitors-count">1000</span> </span><span class="post-count">字数统计 1.6k </span><span class="post-count">阅读时长 6</span></div></header><div class="post-toc" id="post-toc"><h2 class="post-toc-title">文章目录</h2><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是SQL"><span class="toc-text">什么是SQL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#关系型数据库（Relational-databases"><span class="toc-text">关系型数据库（Relational databases)</span></a></li></ol></div></div><div class="post-content"><h1 id="什么是SQL"><a href="#什么是SQL" class="headerlink" title="什么是SQL"></a>什么是SQL</h1><p>SQL, 全称为Structured Query Language（结构化查询语言)。 要讲SQL就绕不开database(数据库), 平时所说的数据库，一般就是指的 Relational database(关系型数据库).</p><p>大家知道数据库是用来存储大量数据的一种软件，那么SQL呢是用来操作数据里的数据，具体来说SQL可以做数据查询，数据更新，写入数据等等。</p><p>如果把数据库比作盘子，那数据就是盘子里的菜，SQL则是你的筷子。</p><p><img src="/cn/bec5/timg.jpg" alt="timg"></p><p>因为SQL和数据库是天生的一对，又相对简单，目前世界上大部分网站和APP背后的数据都是建立在SQL数据库基础之上。</p><h1 id="关系型数据库（Relational-databases"><a href="#关系型数据库（Relational-databases" class="headerlink" title="关系型数据库（Relational databases)"></a>关系型数据库（Relational databases)</h1><p>在学习SQL语法之前有必要解释一下什么是关系型数据库（Relational databases)？数据库由若干张<code>表</code>(Table)组成，这里说的数据Table很像Excel里的表; 正如Excel里的表格，Table也是由 <code>行(rows)</code>和<code>列(columns)</code>组成</p><p>一个Table存储一个类别的数据，每一行是一条数据，每一列是这种数据的一个属性； Table就像一个二维的表格，<code>列(columns)</code>是有限固定的，<code>行(rows)</code>是无限不固定的</p><p>举个例子, 比如我们数据库里有一张<code>表(Table)</code>. 是用来存储世界上所有的狗，每一<code>行(rows)</code>是一条狗的信息。那么你会在这个狗Table里存储 哪些狗的属性<code>列(columns)</code>呢？比如 编号，名字，体重，身高，品种，年龄，毛发颜色。</p><p>SELECT 语句, 通常又称为 查询 （queries), 正如其名, SELECT 可以用来从数据库中取出数据. 一条 SELECT 语句或者叫一个查询, 可以描述我们要从什么表取数据， 要取哪些数据，在返回之前怎么对结果做一些转化计算等等. 我们接下来会说明 SELECT 的语法，看 SELECT 是怎么来实现上述的取数据任务的。</p><p>你可以把一个表(Table)想象成一个类别的事物，比如 狗 (Dogs), 表里的每一行就是 一条狗，每一列代表了狗的一种属性，比如： 颜色，长度等等）</p><p>现在有了这么一张表，最常见的一种查询就是取出表中的 一个或某几个属性列（注意：是所有数据的某几个属性列）</p><p>Select 查询某些属性列（specific columns）的语法<br>SELECT column（列名）, another_column, …<br>FROM mytable（表名）;<br>查询的结果是一个二维的表格，由行（rows）和列（columns）组成, 看起来像是复制了一遍原有的表（Table）,只不过列是我们选定的，而不是所有的列.</p><p>如果我们想取出所有列的数据, 当然可以把所有列名写上，不过更简单的方式用星号 (*) 来代表所有列.如下：<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> 查询所有列</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable（表名）;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table.</span><br></pre></td></tr></table></figure><p></p><p>这条语句经常用来在不清楚table(表）中有什么数据时，能取出所有的数据瞜一眼。</p><p>如果数据表里有100万行数据？真实世界中确实存在，世界上肯定有100万条狗那么多. 如果数据量这么大 之前的SQL语句很可能运行时会崩溃（想象一下你一次性下载1T的电影）</p><p>真实情况下，我们很少直接查所有行，即使查询出来也看不完。为了更精确的查询出特定数据，我们需要学习一个新的SQL语法：SELECT查询的 WHERE 子句. 一个查询的 WHERE子句用来描述哪些行应该进入结果，具体就是通过 condition条件 限定这些行的属性满足某些具体条件。比如：WHERE 体重大于 10KG的狗。你可以把 WHERE想象成一个 筛子，每一个特定的筛子都可以筛下某些豆子。</p><p>条件查询语法<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>, another_column, …</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> condition</span><br><span class="line">    <span class="keyword">AND</span>/<span class="keyword">OR</span> another_condition</span><br><span class="line">    <span class="keyword">AND</span>/<span class="keyword">OR</span> …;</span><br></pre></td></tr></table></figure><p></p><p>注：这里的 condition 都是描述属性列的，具体会在下面的表格体现。<br>可以用 AND or OR 这两个关键字来组装多个条件（表示并且，或者） (ie. num_wheels &gt;= 4 AND doors &lt;= 2 这个组合表示 num_wheels属性 大于等于 4 并且 doors 属性小于等于 2). 下面的具体语法规则，可以用来筛选数字属性列（包括 整数，浮点数） :</p><div class="table-container"><table><thead><tr><th>Operator（关键字）</th><th>Condition（意思）</th><th>SQL Example(例子）</th></tr></thead><tbody><tr><td>=, !=, &lt; &lt;=, &gt;, &gt;=</td><td>Standard numerical operators 基础的 大于，等于等比较</td><td>col_name != 4</td></tr><tr><td>BETWEEN … AND …</td><td>Number is within range of two values (inclusive) 在两个数之间</td><td>col_name BETWEEN 1.5 AND10.5</td></tr><tr><td>NOT BETWEEN … AND …</td><td>Number is not within range of two values (inclusive) 不在两个数之间</td><td>col_name NOT BETWEEN 1 AND10</td></tr><tr><td>IN (…)</td><td>Number exists in a list 在一个列表</td><td>col_name IN (2, 4, 6)</td></tr><tr><td>NOT IN (…)</td><td>Number does not exist in a list 不在一个列表</td><td>col_name NOT IN (1, 3, 5)</td></tr></tbody></table></div><p>越是精确的条件筛选，会让结果更容易理解，同时因为条件在返回之前筛掉不必要的结果，SQL的运行速度也会快很多（想象一下你只是想看下最近有哪些大片上映，你没必要下载整个电影看一遍）.</p><p>如果属性是字符串, 我们会用到字符串相关的一些操作符号，其中 LIKE（模糊查询） 和 %（通配符） 是新增的两个. 下面这个表格对字符串操作符有详细的描述:</p><div class="table-container"><table><thead><tr><th>Operator（操作符）</th><th>Condition（解释）</th><th>Example（例子）</th></tr></thead><tbody><tr><td>=</td><td>Case sensitive exact string comparison (<em>notice the single equals</em>)完全等于</td><td>col_name = “abc”</td></tr><tr><td>!= or &lt;&gt;</td><td>Case sensitive exact string inequality comparison 不等于</td><td>col_name != “abcd”</td></tr><tr><td>LIKE</td><td>Case insensitive exact string comparison 没有用通配符等价于 =</td><td>col_name LIKE “ABC”</td></tr><tr><td>NOT LIKE</td><td>Case insensitive exact string inequality comparison 没有用通配符等价于 !=</td><td>col_name NOT LIKE”ABCD”</td></tr><tr><td>%</td><td>Used anywhere in a string to match a sequence of zero or more characters (only with LIKE or NOT LIKE) 通配符，代表匹配0个以上的字符</td><td>col_name LIKE “%AT%” (matches “AT”, “ATTIC”, “CAT” or even “BATS”) “%AT%” 代表AT 前后可以有任意字符</td></tr><tr><td>_</td><td>Used anywhere in a string to match a single character (only with LIKE or NOT LIKE) 和% 相似，代表1个字符</td><td>col<em>name LIKE “AN</em>“ (matches “AND”, but not “AN”)</td></tr><tr><td>IN (…)</td><td>String exists in a list 在列表</td><td>col_name IN (“A”, “B”, “C”)</td></tr><tr><td>NOT IN (…)</td><td>String does not exist in a list 不在列表</td><td>col_name NOT IN (“D”, “E”, “F”)</td></tr></tbody></table></div></div><div class="post-copyright"><p class="copyright-item"><span>原文作者: </span><a href="https://mapan.tech/cn">MaPan</a></p><p class="copyright-item"><span>原文链接: </span><a href="https://mapan.tech/cn/bec5.html">https://mapan.tech/cn/bec5.html</a></p><p class="copyright-item"><span>许可协议: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a></p></div><footer class="post-footer"><nav class="post-nav"><a class="prev" href="/cn/ea01.html"><i class="iconfont icon-left"></i> <span class="prev-text nav-default">巧妙绕过加密PPT密码</span> <span class="prev-text nav-mobile">上一篇</span> </a><a class="next" href="/cn/b33e.html"><span class="next-text nav-default">Markdown语法和MD编辑器</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer></article></div><div class="comments" id="comments"><div id="vcomments"></div></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="/cn/atom.xml" class="iconfont icon-rss" title="rss" target="_blank"></a></div><div class="copyright"><span class="division">&nbsp;</span><span class="post-count"> 全站字数 83.2k </span><span class="copyright-year">Since 2015 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">MaPan</span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div></div><script src="./lib/valine/av-min.js?v=3.0.4"></script><script src="./lib/valine/Valine.min.js"></script><script type="text/javascript">new Valine({el:"#vcomments",notify:!1,verify:!0,app_id:"XtxvAXPwOzM9noIc3eyxi3AS-gzGzoHsz",app_key:"yEVQszyxb4bwLuAGU5VHnPR8",placeholder:"说点什么吧...",avatar:"mm",visitor:"ture"})</script><script type="text/javascript" src="/cn/lib/jquery/jquery.min.js"></script><script type="text/javascript" src="/cn/lib/slideout/slideout.js"></script><script type="text/javascript" src="/cn/js/src/even.js?v=2.11.0"></script></body></html>